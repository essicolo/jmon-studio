<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>JMON Studio - Algorithmic Walks Visualizations</title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <style>
            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    sans-serif;
                margin: 0;
                padding: 20px;
                background: #f5f5f5;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            h1 {
                color: #2c3e50;
                text-align: center;
                margin-bottom: 10px;
            }
            .subtitle {
                text-align: center;
                color: #7f8c8d;
                margin-bottom: 30px;
                font-style: italic;
            }
            .section {
                margin: 40px 0;
            }
            .section h2 {
                color: #34495e;
                border-bottom: 2px solid #3498db;
                padding-bottom: 10px;
            }
            .plot-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }
            .plot-container {
                background: #fafafa;
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 15px;
            }
            .note {
                background: #e8f6f3;
                border: 1px solid #16a085;
                border-radius: 5px;
                padding: 15px;
                margin: 20px 0;
                color: #2c3e50;
            }
            .note strong {
                color: #16a085;
            }
            .code-info {
                background: #f8f9fa;
                border: 1px solid #e9ecef;
                border-radius: 5px;
                padding: 10px;
                margin: 10px 0;
                font-family: "Courier New", monospace;
                font-size: 14px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üéµ JMON Studio - Algorithmic Walks</h1>
            <p class="subtitle">
                Interactive visualizations of random walks, Gaussian processes,
                celestial motion, and Fibonacci sequences in music
            </p>

            <div class="note">
                <strong>Note:</strong> This demo shows how the Plotly.js
                visualizations from the <code>walks.js</code> example would
                appear in a browser environment. In the Zed REPL, you would see
                the data output instead of interactive plots, but the same
                plotting code works seamlessly in web browsers.
            </div>

            <div class="section">
                <h2>üìä 1. Probability Distributions</h2>
                <p>
                    Understanding the mathematical foundations of randomness in
                    music generation.
                </p>
                <div class="plot-grid">
                    <div class="plot-container">
                        <div id="normal-plot"></div>
                    </div>
                    <div class="plot-container">
                        <div id="uniform-plot"></div>
                    </div>
                    <div class="plot-container">
                        <div id="discrete-plot"></div>
                    </div>
                    <div class="plot-container">
                        <div id="poisson-plot"></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üö∂‚Äç‚ôÇÔ∏è 2. Random Walks with Branching</h2>
                <p>
                    Visualizing how random walks can branch and merge to create
                    complex musical paths.
                </p>
                <div class="plot-container">
                    <div id="walks-plot"></div>
                </div>
            </div>

            <div class="section">
                <h2>üåä 3. Gaussian Process Variations</h2>
                <p>
                    Different length scales and amplitudes create various
                    wave-like patterns in music.
                </p>
                <div class="plot-grid">
                    <div class="plot-container">
                        <div id="gp-short-waves-plot"></div>
                    </div>
                    <div class="plot-container">
                        <div id="gp-medium-waves-plot"></div>
                    </div>
                    <div class="plot-container">
                        <div id="gp-long-waves-plot"></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üéº 4. Pachelbel Canon Variations</h2>
                <p>
                    Fitted Gaussian Process generating variations around
                    Pachelbel's famous progression.
                </p>
                <div class="plot-container">
                    <div id="pachelbel-fitted-gp"></div>
                </div>
            </div>

            <div class="section">
                <h2>ü™ê 5. Celestial Motion</h2>
                <p>
                    Orbital mechanics translated into musical parameters -
                    distance and angle over time.
                </p>
                <div class="plot-grid">
                    <div class="plot-container">
                        <div id="celestial-distance-0"></div>
                    </div>
                    <div class="plot-container">
                        <div id="celestial-angle-0"></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üîÑ 6. Fibonacci Sequences</h2>
                <p>
                    The golden ratio in music - raw Fibonacci numbers and their
                    musical scale degrees.
                </p>
                <div class="plot-grid">
                    <div class="plot-container">
                        <div id="fibonacci-raw"></div>
                    </div>
                    <div class="plot-container">
                        <div id="fibonacci-degrees"></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üéπ Musical Integration</h2>
                <div class="code-info">
                    <strong>Generated JMON Composition:</strong><br />
                    ‚Ä¢ Title: "Algorithmic Walks Showcase"<br />
                    ‚Ä¢ Total tracks: 6 (Random walks, GP blues, Pachelbel
                    variations, Celestial motion, Fibonacci melody)<br />
                    ‚Ä¢ BPM: 110, Key: C major, Time: 4/4<br />
                    ‚Ä¢ All using numeric time format (quarter notes) for MIDI
                    compatibility
                </div>
            </div>
        </div>

        <script>
            // Generate sample data similar to the Node.js example

            // 1. Probability Distributions
            function generateNormalData() {
                const x = [],
                    y = [];
                for (let i = 0; i < 100; i++) {
                    const xi = -4 + (8 * i) / 99;
                    const yi =
                        (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * xi * xi);
                    x.push(xi);
                    y.push(yi);
                }
                return { x, y };
            }

            function generateUniformData() {
                const x = [],
                    y = [];
                for (let i = 0; i < 100; i++) {
                    const xi = -4 + (8 * i) / 99;
                    const yi = xi >= -1 && xi <= 1 ? 0.5 : 0;
                    x.push(xi);
                    y.push(yi);
                }
                return { x, y };
            }

            const normalData = generateNormalData();
            const uniformData = generateUniformData();
            const discreteData = {
                x: ["Folk", "Classical", "Punk Rock", "Jazz"],
                y: [0.15, 0.3, 0.1, 0.45],
            };
            const poissonData = {
                x: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                y: [0.05, 0.15, 0.22, 0.22, 0.17, 0.1, 0.05, 0.02, 0.01, 0.01],
            };

            // Create probability distribution plots
            Plotly.newPlot(
                "normal-plot",
                [
                    {
                        x: normalData.x,
                        y: normalData.y,
                        type: "scatter",
                        mode: "lines",
                        line: { color: "blue", width: 2 },
                        name: "Normal",
                    },
                ],
                {
                    title: "Normal Distribution",
                    xaxis: { title: "Value" },
                    yaxis: { title: "Probability Density" },
                },
            );

            Plotly.newPlot(
                "uniform-plot",
                [
                    {
                        x: uniformData.x,
                        y: uniformData.y,
                        type: "scatter",
                        mode: "lines",
                        line: { color: "green", width: 2 },
                        name: "Uniform",
                    },
                ],
                {
                    title: "Uniform Distribution",
                    xaxis: { title: "Value" },
                    yaxis: { title: "Probability Density" },
                },
            );

            Plotly.newPlot(
                "discrete-plot",
                [
                    {
                        x: discreteData.x,
                        y: discreteData.y,
                        type: "bar",
                        marker: { color: "orange" },
                        name: "Discrete",
                    },
                ],
                {
                    title: "Discrete Distribution (Music Genres)",
                    xaxis: { title: "Genre" },
                    yaxis: { title: "Probability" },
                },
            );

            Plotly.newPlot(
                "poisson-plot",
                [
                    {
                        x: poissonData.x,
                        y: poissonData.y,
                        type: "bar",
                        marker: { color: "red" },
                        name: "Poisson",
                    },
                ],
                {
                    title: "Poisson Distribution",
                    xaxis: { title: "k" },
                    yaxis: { title: "Probability" },
                },
            );

            // 2. Random Walks
            function generateRandomWalk(length, start, std) {
                const walk = [start];
                for (let i = 1; i < length; i++) {
                    const step = (Math.random() - 0.5) * 2 * std;
                    walk.push(Math.max(36, Math.min(108, walk[i - 1] + step)));
                }
                return walk;
            }

            const walkData = [
                {
                    x: Array.from({ length: 20 }, (_, i) => i),
                    y: generateRandomWalk(20, 60, 3),
                    name: "Branch 1",
                },
                {
                    x: Array.from({ length: 15 }, (_, i) => i),
                    y: generateRandomWalk(15, 65, 2),
                    name: "Branch 2",
                },
                {
                    x: Array.from({ length: 18 }, (_, i) => i),
                    y: generateRandomWalk(18, 58, 4),
                    name: "Branch 3",
                },
            ];

            Plotly.newPlot(
                "walks-plot",
                walkData.map((data) => ({
                    x: data.x,
                    y: data.y,
                    type: "scatter",
                    mode: "lines+markers",
                    name: data.name,
                    line: { width: 2 },
                })),
                {
                    title: "Random Walks with Branching and Merging",
                    xaxis: { title: "Time Step" },
                    yaxis: { title: "MIDI Pitch" },
                    height: 400,
                },
            );

            // 3. Gaussian Process samples
            function generateGPSample(length, lengthScale, amplitude) {
                const sample = [];
                let prev = 0;
                for (let i = 0; i < length; i++) {
                    const decay = Math.exp(
                        -Math.abs(i - (i - 1)) / lengthScale,
                    );
                    prev =
                        decay * prev +
                        (1 - decay) * (Math.random() - 0.5) * amplitude;
                    sample.push(prev);
                }
                return sample;
            }

            // Short waves
            Plotly.newPlot(
                "gp-short-waves-plot",
                [
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 2, 0.5),
                        name: "Sample 1",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 2, 0.5),
                        name: "Sample 2",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 2, 0.5),
                        name: "Sample 3",
                        type: "scatter",
                        mode: "lines",
                    },
                ],
                {
                    title: "Gaussian Process: Short Waves, Low Amplitude",
                    xaxis: { title: "Time Step" },
                    yaxis: { title: "Value" },
                    height: 300,
                },
            );

            // Medium waves
            Plotly.newPlot(
                "gp-medium-waves-plot",
                [
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 10, 2),
                        name: "Sample 1",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 10, 2),
                        name: "Sample 2",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 10, 2),
                        name: "Sample 3",
                        type: "scatter",
                        mode: "lines",
                    },
                ],
                {
                    title: "Gaussian Process: Medium Waves, Medium Amplitude",
                    xaxis: { title: "Time Step" },
                    yaxis: { title: "Value" },
                    height: 300,
                },
            );

            // Long waves
            Plotly.newPlot(
                "gp-long-waves-plot",
                [
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 30, 5),
                        name: "Sample 1",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 30, 5),
                        name: "Sample 2",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: Array.from({ length: 100 }, (_, i) => i),
                        y: generateGPSample(100, 30, 5),
                        name: "Sample 3",
                        type: "scatter",
                        mode: "lines",
                    },
                ],
                {
                    title: "Gaussian Process: Long Waves, High Amplitude",
                    xaxis: { title: "Time Step" },
                    yaxis: { title: "Value" },
                    height: 300,
                },
            );

            // 4. Pachelbel variations
            const pachelbelOriginal = {
                x: [0, 2, 4, 6, 8, 10, 12, 14],
                y: [7, 4, 5, 2, 3, 0, 3, 4],
            };
            const timePoints = Array.from({ length: 32 }, (_, i) => i * 0.5);

            Plotly.newPlot(
                "pachelbel-fitted-gp",
                [
                    {
                        x: timePoints,
                        y: timePoints.map(
                            (t) =>
                                4 +
                                Math.sin(t * 0.3) * 2 +
                                Math.cos(t * 0.1) * 1.5,
                        ),
                        name: "Variation 1",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: timePoints,
                        y: timePoints.map(
                            (t) =>
                                4 +
                                Math.sin(t * 0.2) * 1.5 +
                                Math.cos(t * 0.15) * 2,
                        ),
                        name: "Variation 2",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: timePoints,
                        y: timePoints.map(
                            (t) =>
                                4 +
                                Math.sin(t * 0.25) * 1.8 +
                                Math.cos(t * 0.12) * 1.2,
                        ),
                        name: "Variation 3",
                        type: "scatter",
                        mode: "lines",
                    },
                    {
                        x: pachelbelOriginal.x,
                        y: pachelbelOriginal.y,
                        name: "Original Progression",
                        type: "scatter",
                        mode: "markers",
                        marker: { size: 10, color: "red" },
                    },
                ],
                {
                    title: "Pachelbel Canon Variations (Fitted Gaussian Process)",
                    xaxis: { title: "Time (quarter notes)" },
                    yaxis: { title: "Scale Index" },
                    height: 400,
                },
            );

            // 5. Celestial motion
            const celestialTime = Array.from(
                { length: 100 },
                (_, i) => i * 0.1,
            );
            const distances = celestialTime.map(
                (t) => 2 + 0.5 * Math.sin(t) + 0.2 * Math.cos(3 * t),
            );
            const angles = celestialTime.map((t) => (t * 57.3) % 360);

            Plotly.newPlot(
                "celestial-distance-0",
                [
                    {
                        x: celestialTime,
                        y: distances,
                        type: "scatter",
                        mode: "lines",
                        line: { color: "blue", width: 2 },
                        name: "Distance",
                    },
                ],
                {
                    title: "Planet 1 - Distance from Center",
                    xaxis: { title: "Time" },
                    yaxis: { title: "Distance" },
                },
            );

            Plotly.newPlot(
                "celestial-angle-0",
                [
                    {
                        x: celestialTime,
                        y: angles,
                        type: "scatter",
                        mode: "lines",
                        line: { color: "green", width: 2 },
                        name: "Angle",
                    },
                ],
                {
                    title: "Planet 1 - Orbital Angle",
                    xaxis: { title: "Time" },
                    yaxis: { title: "Angle (degrees)" },
                },
            );

            // 6. Fibonacci sequences
            function generateFibonacci(n) {
                const fib = [0, 1];
                for (let i = 2; i < n; i++) {
                    fib.push(fib[i - 1] + fib[i - 2]);
                }
                return fib;
            }

            const fibNumbers = generateFibonacci(20);
            const fibDegrees = fibNumbers.map((n) => n % 7);

            Plotly.newPlot(
                "fibonacci-raw",
                [
                    {
                        x: Array.from({ length: 20 }, (_, i) => i),
                        y: fibNumbers,
                        type: "scatter",
                        mode: "lines+markers",
                        line: { color: "purple", width: 2 },
                        name: "Fibonacci",
                    },
                ],
                {
                    title: "Fibonacci Sequence (Raw Numbers)",
                    xaxis: { title: "Index" },
                    yaxis: { title: "Fibonacci Number" },
                },
            );

            Plotly.newPlot(
                "fibonacci-degrees",
                [
                    {
                        x: Array.from({ length: 20 }, (_, i) => i),
                        y: fibDegrees,
                        type: "scatter",
                        mode: "lines+markers",
                        line: { color: "orange", width: 2 },
                        name: "Degrees",
                    },
                ],
                {
                    title: "Fibonacci Sequence (Modulo 7 - Scale Degrees)",
                    xaxis: { title: "Index" },
                    yaxis: { title: "Scale Degree" },
                },
            );
        </script>
    </body>
</html>
